## 课程:数学实验

#### 1.2 实验一:限定区域的随机投点实验 (视频1)
题目及答案:http://www.icourse163.org/learn/UESTC-235004?tid=1002359015#/learn/content?type=detail&id=1003186967&cid=1003819046

##### 知识点:
- rand(1,N)产生1行N列的随机数向量,随机数大小在0-1之间均匀分布
- exp(1) 返回自然数e
- eplot('fx',[xmin xmax ymin ymax])绘制曲线 (easy plot): 如 eplot('log(x)',[0 C 0 1]),第一个参数是曲线的函数表达式
- plot(x,y,'.')绘制投点
- hold on: 在同一个图上画两条曲线时用
- axis([0 C 0 1])
- find 查找函数, 如idx=find(x>=C*y & x<=C.^y)即为找出符号条件的x的下标,返回的就是一个下标向量

#### 1.2 实验二:摆线动画实验 (视频2)
题目及答案:http://www.icourse163.org/learn/UESTC-235004?tid=1002359015#/learn/content?type=detail&id=1003186967&cid=1003819047

##### 知识点:
- linspace
- length
- hold off: 继续绘图前先清除当前窗口
- set
- pause
- axis equal

#### 2.1 基本语法
- 界面(matlab/octave):命令窗口,编辑窗口(F5执行).       (视频1)
- 矩阵的创建:A=[1 2 3; 4 5 6; 7 8 9].同一行元素之间用空格或逗号,不同行之间用分号或换行,整体用方括号.   (以下为视频2)
- 矩阵的乘法: * 如C=A*B
- 注释语句:%开头
- 变量名区分大小写
- 一个函数可以返回多个值:如[V1 V2 V3]=myfun(M1,M2)
- 一个语句可以只有表达式,且其值自动赋给内部变量ans
- 语句分隔符使用 逗号 或分号.若语句末尾不使用分号则会显示执行结果,即会把末尾为逗号或什么都没的语句执行结果显示出来.
- 常用命令
  - clear 清除工作空间中的变量
  - clear 变量名列表(变量名之间用空格分隔,不需要加方括号)
  - clc 清除命令窗口内容
  - who 列出当前工作空间的所有变量名称
  - whos 列出当前工作空间的所有变量更多信息(维数,占用内存字节数等)
  - whos 变量名列表(变量名之间用空格分隔,不需要加方括号)
- 数组的创建: 同一行元素之间用空格或逗号,不同行之间用分号或换行,整体用方括号          (以下为视频3)
- 冒号操作符:创建行向量,a:step:b,默认step为1,故a:b等同于a:1:b.(包括a和b)
- linspace(a,b,n):n-1等分区间[a,b]的节点组成的行向量(包括a和b)
- 数组拼接:[A B]横向拼接,A和B行数要相同.[A; B]纵向拼接,A和B列数要相同
- 空矩阵:a=[]
- zeros(m,n):产生一个m行n列的0矩阵
- ones(m,n):产生一个m行n列的元素全为1的矩阵
- eye(m,n):产生一个m行n列的单位矩阵(对角元素全为1,其他为0).(只有这个没s)
- 数组下标从1开始.可以直接定义数组的某几个元素,而不用先定义数组.如f(1)=1;f(2)=1;这里就直接定义了f是数组,且其前两个元素为1.
- 访问数组元素:x(i),x(a:b:c),x([a b c d]),x(i,j).用圆括号,且可通过用冒号操作符和向量等访问多个
- 获取矩阵的某一行:A(r,:)第r行.
- 获取矩阵的某一列:A(:,c)第c列.(r,c都可为向量,表示取多行或多列)
- 获取子阵:A(行下标集,列下标集),如y=x([2 3],[1 3 4])为获取x的第2,3行和第1,3,4列组成的2行3列矩阵
- 数组名(:):将数组中所有元素组成列向量,一列接一列地排
- 矩阵数值可以一行一行地改,或一列一列,或一个子阵一个子阵地改,不过两侧维数要相同.如A(i,:)=B(k,:);A([1 2],:)=V
- 删除矩阵元素:将空矩阵复制给相应子阵即可.如A(i1:i2,:)=[]
- end可以表示最后一个下标值,元素个数,行数,列数等,具体视出现的位置而定.如x(end,2)表示最后一行的第2个元素.t(1:end-1),t(end-2:end),A(1:end-1,:),A(:,[2:end])
- 运算符:算术运算符,关系运算符,逻辑运算符          (以下为视频4)
- 算术运算符:
  - 矩阵之间的运算符:+ - * / \ ^
  - 数组对应元素之间: .*    ./     .\    .^
  - 标量之间的运算符:+ - * / ^ \
- 矩阵的运算
  - 矩阵转置: B.'   (注意点号)
  - 矩阵的共轭转置: B'
  - 矩阵加减:A+B A-B,对应元素相加减,需维数相同或其中之一为标量
  - 矩阵相乘:A*B
  - 矩阵左除:A\B,当A为方阵表示$A^{-1}B$
  - 矩阵右除:A/B,当B为方阵表示$AB^{-1}$,或B为标量
  - 矩阵幂:A^n, A为方阵
  - 矩阵的逆:inv(A)
- 数组的运算(数组对应元素计算,多了个点号):要求A与B同维数,或其中之一为标量
  - 数组相乘:A.*B
  - 数组右除:A./B
  - 数组左除:A.\B
  - 数组幂:A.^B
- 关系运算符:<,<=,>,>=,==,~= (注意不等号),运算符两边可为向量,则表示对应元素之间的关系比较,并返回一个向量结果
- 逻辑运算符: &, |, ~ (注意都是单个)
- 数据类型: double,char, sys (符号类型,symbol),struct,cell(各个元素类型可以互不相同)          (以下为视频5)
- 查看变量类型:
  - whos 变量名(或变量名列表)
  - class(变量名)
- 创建cell数组:a=cell(m,n). 其中各个元素类型可以互不相同
- 存取cell数组:用花括号,而不再是方括号
  - a{i},
  - a{i,j}(这里i为行下标,j为列下标)
- 输入输出               (以下为视频6)
  - input(提示信息字符数组)    接收输入.数据类型根据输入决定
  - input(提示信息字符数组,'s')    接收输入.输入的为字符数组
  - disp(变量名)   显示数组内容,但不会显示变量名
  - sprintf(formatSpec,A1,A2,...,An)
  - 格式化:%d 整数, %f 浮点数, %c 单个字符, %s 字符数组. %后加整数可以限定长度,如%5d, %5s

s=sprint("something");
disp(s)
这两条语句能够使其只输出something.否则会输出s=或ans=
或
disp(sprint("something"))

#### 2.2 常用函数
- rand函数:产生随机数
  - rand(m,n)产生m行n列的随机数
  - rand(m) 产生m行m列的随机数
- fix函数:取整
- sum: 求和
  - sum(v) 求向量v元素的和
  - sum(A,1) 或 sum(A): 求矩阵A中每列的和,返回成1个行向量
  - sum(A,2):求矩阵中每行的和,返回一个列向量
- mean:求均值
  - mean(v) 求向量v元素的均值
  - mean(A,1) 或 sum(A): 求矩阵A中每列的均值,返回成1个行向量
  - mean(A,2):求矩阵中每行的均值,返回一个列向量 
- max:求最大值  [v I]=max(x) 
  - 若x为向量,则v为最大值,I为下标
  - 若x为矩阵,则v为x的每列的最大元素组成的行向量,I为对应行下标组成的行向量
- min:求最小值  [v I]=min(x) 
  - 若x为向量,则v为最小值,I为下标
  - 若x为矩阵,则v为x的每列的最小元素组成的行向量,I为对应行下标组成的行向量
- length(x)
  - 若x为向量,则返回元素个数
  - 若x为矩阵,则返回行数和列数
- size(x):返回行数和列数组成的行向量
- sort(x):排序函数. B=sort(v)或[B I]=sort(v)或B=sort(x,'ascend'),其中B为按递增排序后的元素,I为排序后的元素在原向量中的下标
- sort(x,'descend'):按降序排序
- find(查找条件):查找函数. 某些情况下可用sum
- fliplr函数:反序?
- dot(a,b):点乘?
- exp(x):求指数
- sin(x):求正弦
- dec2bin(i,n) 将十进制数i变成n位二进制,且为字符串形式
- x=str-'0',其中str为二进制字符串,这个方法能把二进制字符串转成0-1数组矩阵

#### 2.3 控制语句
- if分支语句:
'''
if 逻辑表达式,
   语句块
end
'''
或
'''
if 逻辑表达式,
   语句块 
elseif 逻辑表达式,
   语句块
else 逻辑表达式,
   语句块
end
'''

- switch分支语句
'''
switch expr
case case_expr,
  语句块1
case {expr1,expr2,...}
  语句块2
otherwise,
  语句块3
end
'''
- for循环语句
'''
for x=array
   语句块
end
'''
- while循环语句:
'''
while expr
  语句块
end

- continue和break

#### 2.4 函数编程
- 程序文件类型:脚本文件和函数文件
- 脚本文件可使用工作空间中的变量,且执行完后脚本文件中的变量还会保留在工作空间中.如myfile.m,则输入myfile即可运行和调用,或打开按F5
- 函数文件里使用了function 来定义函数.使用方法与脚本文件类似
- 将文件夹添加都matlab搜索路径的几种方法:
  - 运行菜单条"Set Path"设置
  - addpath E:\mywork  %以命令方式
  - addpath('E:\mywork')  %以函数调用方式
  - path('E:\mywork',path)
  - path(path,'E:\mywork')
- 程序模块化设计与函数编程:示例:1.绘制动态旋转的矩形.2.绘制一个矩形.3.给定旋转角度计算旋转矩阵M
- 函数语法基础                                     (以下为视频2)
- function [输出参数列表]=函数名(输入参数列表)  
- 参数用逗号分隔
- 保存函数的文件名要与函数名相同,调用时以文件名作为函数名调用
- nargin,nargout分别表示输入输出参数个数
- return 返回函数调用
- pause 暂停执行,按任意键继续
- pause(n) 暂停n秒
- 一个函数文件可以包含多个函数.其中第一个函数是主函数,后面的函数都为子函数
- 函数文件名与主函数名相同,调用时只执行主函数
- 子函数只能被所在的函数文件中的其他函数调用
- 子函数不能调用主函数
- 脚本文件中不能定义函数
- inline函数: 根据expr建立内联函数.(以下除了N外,其余参数都是字符串)
  - inline(expr) 函数自变量根据表达式自动确定.如f=inline('2*x.*x');x=linespace(-10,10,100);plot(x,f(x))
  - inline(expr,arg1,arg2,...) 指定了自变量符号
  - inline(expr,N)  自变量符号为x,P1,P2,...,PN.如f=inline('x^P1+x^P2',2)
  - 如f=inline('x.^2+y.^3'),v=f(1:3,5:7)
- 匿名函数:使用@符号,@(参数列表)(函数表达式). 如f=@(x)(x.^2);val=f(1:5)
- 穷举法:2个实例       (视频5)


#### 3.1 一元函数绘图方法
- plot()   基本绘图方法.
  - plot(x,y);
  - plot(x,y,'r--');
  - plot(x1,y1,x2,y2);
  - plot(x1,y1,'r',x2,y2,'b')
- ezplot()  简易绘图方法.如ezplot('sin(x)',[0,10,-1,1])
- fplot()  函数绘图方法,要给定自变量范围
- legend('line1','line2'):输出图例
- title('figure title') :在图形顶部输出标题
- xlabel :标注x轴
- ylabel :标注y轴
- polar(Theta,Rho,s):极坐标绘图.Theta为角度,Rho为半径,s是字符串用于控制线型
- bar(x,y) 绘条形图
- bar3(x,y) 绘三维条形图
- subplot(m,n,i) 给出m行n列的子图块,其中第i个子图块绘制接下来这个图.每个subplot上可加一个title

#### 3.2 二元函数绘图方法
- plot3(x1,y1,z1,s1,x2,y2,z2,s2)
- zlable('z')
- 空间曲面绘制步骤:1.生成平面网格,2.计算网格点上函数值,3.绘制网面
- 创建网格矩阵: [X Y]=meshgrig(x,y)  (x,y为向量,X,Y为矩阵,X为把行向量x扩充到len(y)行,Y为把列向量y扩充到len(x)列)
- 绘制网格:mesh(x,y,z)或mesh(x,y)
- colormap([0 0 1]):将线色定为蓝色
- meshc(x,y,z)绘制用等平面描述的网格图
- meshz(x,y,z)绘制含零平面的网格图
- countour(x,y,z,n) 绘制n条二维的等高线
- countour3(x,y,z,n)  绘制n条三维等高线

#### 3.3 字符串操作函数 (有三页ppt的函数表)
- str2num(s) 将字符串转换为数字
- num2str(v) 将数字转换为字符串
- strcat(s1,s2) 横向拼接
- strvcat(s1,s2) 纵向拼接
- strtok 字符串分割提取函数. [token,remain]=strtok(str,delim) 其中,delim是分隔符(默认为空格,且若str顶格为空格会被忽略),token为找到的第一个的标识符.
- findstr: 找出较短的字符串在较长的字符串中的位置起始索引号 k=findstr(s1,s2)
- strfind: k=strfind(text,pattern) 返回pattern在text中的位置索引号,若不指定则默认为空格

#### 3.4 文本操作函数
- fopen 打开文件,如fid=fopen("myout.txt','wt'), fid存储的是文件句柄,若句柄>0则说明打开成功.第二个参数为打开方式.
- 打开方式:'r'(只读,文件需已存在),'r+'(读写,文件需已存在),'w'(写),'w+'(读写,先读后写),'a'(在文件末端添加数据),'a+'(先读再添加).在这些字符后添加't'则表示以文本方式打开,添加'b'则表示以二进制格式打开,默认是二进制格式打开.
- fprintf 输入到文件.如 fprintf(fid,'name=%s',name)
- fscanf 从文件读取
- fgets 读取一行,保留换行符
- fgetl 读取一行
- fclose 关闭文件.如sta=fclose(fid),返回值若为0表示关闭成功,否则为-1.关闭所有已打开的文件:fclose('all')
- feof(fid) 表示读到文件末尾,~feof(fid)表示还没有读到文件末尾
- edit 'mytxt.txt' 在编辑状态下打开


#### 4.1符号计算
- 符号计算可以完成精确的推导和计算,如求导,求极限
- 符号变量需先定义
- 符号计算的部分功能: 复合运行,变量代换及化简,求行列式,求特征值,求导,求极限,求定积分,微分方程求解
- 求极限: syms x; r=limit(exp(-x),x,+inf)
- 求导: syms x; d=diff(x*x*exp(x),x,1) (求函数的一阶导)
- 定义符号变量:
  - syms arg1 arg2 ...
  - syms arg1 arg2 ... real  (符号变量为实数)
  - syms arg1 arg2 ... positive (符号变量为正数)
  - eval(sprintf('syms x%d',i))
  - sym(A)
  - sym('x','real')与syms x real 效果相同
- subs(s,old,new) 符号表达式的替换,将s表达式中的old变量替换为new. old可以是变量组成的向量
  - fval=subs(f,[x,y],[1,2])
  - fval=subs(f,{'x','y'},{1,2})
  - fval=subs(f,{x,y},{1,2})
- simplify(expr) 对表达式化简
- vpa(s) 计算符号表达式s的数值结果
- vpa(s,n) 采用n位有效数字计算精度求符号表达式s的数值结果
- digits 显示vpa计算结果的有效数字的位数
- digits(n) 设置vpa计算结果的有效数字的位数
- double(s) 将符号表达式s转换为双精度数值
- char(s) 将符号表达式s转换为字符串

#### 4.2 常用符号函数
- 复合计算函数
  - compose(f,g)  返回f(g(y)),其中f=f(x),g=g(y)
  - compose(f,g,z) 返回f(g(z)),其中f=f(x),g=g(y),并用z代替y
  - compose(f,g,x,y,z)  返回f(g(z)),其中f=f(x),g=g(y),将x=g(y)代入f(x),最后用z代替y.
- 极限函数
  - limit(f,x,a) 计算f(x)当x趋向于a的极限
  - limit(f,x,a,'right') 计算右极限
  - limit(f,x,a,'left') 计算左极限
- 求导函数
  - diff(s,'v')     求s对v的1阶导数
  - diff(s,'v',n)   求s对v的n阶导数
- 积分函数
  - int(expr,var) 计算expr对var的不定积分
  - int(expr,var,a,b) 计算expr对var在[a,b]区间的定积分
- 泰勒多项式函数
  - taylor(f)  计算f的5阶麦克劳林多项式
  - taylor(f,v,Name,Value)  其中Name为属性名(如'order','expansionpoint'),Value为属性值.v为自变量
  - taylor(f,v,a)  计算f在点a展开的麦克劳林多项式
  - taylor(f,v,a,Name,Value)


#### 5.1 矩阵运算函数(含5.2,5.3)
- diag(diag(A)): 矩阵A的对角阵
- triu(A):A的上三角阵
- tril(A):A的下三角阵
- inv(A):A的逆
- 求解线性方程Ax=b:A\b或者inv(A)*b
- eig(A):求A的特征值和特征向量Ax=kx.
  - lambda=eig(A):lambda为A的全部特征值构成的列向量
  - [V, D]=eig(A):D为对角阵,为A的全部特征值.V为满阵,V的列向量构成对应于D的特征向量组.
- 相似:inv(P)AP=B.相似阵有相同的特征值.
- 若A可相似对角化,则$A^k=P\Lambda^kP^(-1)$
- 

#### 6.1 非线性方程求根(含6.2)
- 非线性方程主要的两种类型:代数方程和超越方程
- 代数方程:f(x)=a_0+a_1x+...+a_nx^n=0
- 超越方法:f(x)中含三角函数,指数函数,或其他超越函数
- solve():求解方程的根,是符号运算
- 二分法:每次取区间中点,判断中点和两端点函数值的正负,然后判定根在哪半个区间,一直这样下去,最后区间会收敛到根.
- 不动点迭代法:给定一个初值,用某个固定公式(由f(x)=0改写成x=g(x))反复校正最后得到根.
- 不动点迭代法的收敛性:
- 收敛阶:
- 收敛的判定定理
- 牛顿迭代法:将非线性方程逐步归结为某种线性方程的解.x_{k+1}=x_k-f(x_k)/f'(x_k)
- 简化的牛顿迭代法:x_{k+1}=x_k-cf(x_k)

#### 6.3 曲线拟合(含6.4)
- p=polyfit(x,y,n):多项式拟合函数.x,y为数据点,n为多项式阶数.p为幂次从高到低的多项式系数向量.
- y=polyval(p,x):多项式求值函数.x,y,p意义同上.


#### 7.1 微分方程 (含7.2)
- 一阶常微分方程: dy/dt=f(t,y),初值y(t0)=y0.求y=y(t)
- 高阶常微分方程:
- ode23:求解微分方程.显式的单步Runge-Kutta低阶(2阶到3阶)解法.适用具有一定难度对精度要求不高或者f(t,y)不平滑(非连续)的问题.[T,Y]=ode23('F',Tspan,y0),其中'F'是函数,Tspan=[t0,tN]是求解区间,y0是初始条件.F也需给出列向量?
- ode45:求解微分方程.显式的单步Runge-Kutta中阶(4阶到5阶)解法.适用对精度有一定要求的非难度问题
- 欧拉法:y_{k+1}=y_k+hf(t_k,y_k)

#### 7.3 数值积分(含7.4)
- 基本思想:细分积分区间,以简代繁,求小面积的和,得到定积分的近似值
- trapz():梯形法求解积分.Q=trapz(X,Y)
- quad():基于变步长simpso法求积分.q=quad(fun,a,b,tol).其中a,b分别为积分下限和上限,tol为积分精度,默认为10^(-6)
- quadl():高精度Lobatto积分法
- dblquad():矩形区域二重数值积分.q=dblquad(fun,a,b,c,d,tol),其中a,b分别为内积分下限和上限,c,d分别为外积分下限和上限.
- quad2d()
- int(fun,a,b):符号积分,求精确解.


#### 8.1 最优化模型实验基础(含8.2的几个例子)
- 最优化方法就是求解一元或多元函数的极小值或最小值的计算方法
- 数学模型: min f(x1,...,xn) s.t. hi(x1,...,xn)=0,i=1,...,m;  gj(x1,...,xn)>0,j=1,...,n
- ff(x1,...,xn)为目标函数,min为极小化,后面为等式约束和不等式约束
- 常用方法为迭代下降法:
  - 给出一个f(Xk)的初始值
  - 按一定规则产生Xk的一个下降方向Pk
  - 沿Pk搜索得下一个迭代点$X_{k+1}$,s.t.$f(X_{k+1})<f(x_k)$
  - 若满足停止条件则终止,否则继续迭代
- 局部极小点和全局极小点
- fminbnd(): 求单变量无约束(箱约束,边界约束)最优化问题的局部极小点($min_{x_1\le x\le x_2}f(x)$). 该命令使用黄金分割法或插值法.只能得到区间中的一个极小点.
- fminsearch():求解多变量无约束最优化问题的局部极小点($min f(x_1,...,x_n)$).该命令使用基于免导数的算法:Nelder-Mead单纯形方法,可处理不可导的目标函数
- fminunc():求解多变量无约束最优化问题的局部极小点,适用对象与fminsearch一样.但该方法是基于导数的算法:拟牛顿方法,信赖域方法.故其必须要求目标函数可导
- fmincon():求解多变量有约束最优化问题的局部极小点.使用信赖域方法,有效集方法,内点法,序列二次规划法.
- linprog():求解实数线性规划问题($min C^(T)X$,s.t.$AX=b,X\ge 0$),它采用内点法,(对偶)单纯形法,有效集法.
- intlinprog():求解混合整数线性规划问题($min C^(T)X$,s.t.$AX=b,X\ge 0$,$\exists x_i\in Z$),它采用分支定界法.
- ga():遗传算法,求解困难,复杂,多态最优化问题的全局最优解,即指或高维,不可导,具有多个极小点,目标函数不具有显示表达式的
- solve(f,'x'):求f(x)=0的根


#### 8.3 线性规划模型与模型求解
- 线性规划的标准形式:决策变量,目标函数,约束条件
- lingprog 三种调用格式
- 3个例子

#### 9.1 9.2 随机变量的模拟
- rand():生成(0,1)区间上的均匀分布的随机数.采用线性同余法,具有周期性.为伪随机数生成器.
  - rand(m):生成m*m维的随机数
  - rand(m,n):生成m*n维的随机数
  - rand([m,n,p...]):生成排列成m\*n\*p...多维向量的随机数
- unifrnd():生成指定区间内均匀分布的随机数
  - unifrnd(a,b,m,n):生成区间[a,b]内的均匀分布随机数
- randn():生成服从标准正态分布的随机数
- normrnd():生成指定均值,标准差的正态分布随机数
- exprnd():生成服从指数分布的随机数
- 生成两点分布(见例子):x=-1 when rand<0.5, x=1 when rand>=0.5
- 一般的离散随机变量如何模拟

#### 9.3 蒙特卡罗方法原理
- 求积分时,用一个大矩形把曲线框起来,曲线面积与矩形面积之比看成概率,用频率去近似.在矩形区域内均匀投点,求解两个区域内点数之比.
- 蒙特卡罗方法:计算机随机模拟方法,一种基于"随机数"的计算方法.冯.诺依曼用赌城(摩纳哥Monte Carlo)命名的.
- 基本思想:当所要求解的问题是某种事件出现的概率,或者是某个随机变量的期望值时,它们可以通过某种"试验"的方法,得到这种事件出现的频率,或者这个随机变数的平均值,并用它们作为问题的解.
- 几个例子
